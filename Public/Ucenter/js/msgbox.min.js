/*
 * msgbox jQuery plug-in 1.0
 * written in 2011-5-13 GuoZhenShi
 */
var maskDefaultSetting={bgColor:"#000",opacity:.6,zIndex:999,onClick:null};function MaskLayer(g){var c="100%",e="absolute",b="0px",a=this,d=a;a.settings=$.extend({},maskDefaultSetting,g);a.maskLayer=$("<div/>",{css:{background:a.settings.bgColor,opacity:a.settings.opacity,"z-index":a.settings.zIndex,display:"none",left:b,top:b}});$("body").append(a.maskLayer);if($.browser.msie&&$.browser.version=="6.0"){a.maskLayer.css({position:e});a.replacement=function(){var b=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),a=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight);d.maskLayer.css({width:b+"px",height:a+"px"})};var f=$("<iframe/>",{css:{position:e,top:b,left:b,width:c,height:c,filter:"alpha(opacity=0)",display:"block"}});a.maskLayer.append(f);a.settings.onClick&&f.contents().click(function(){d.settings.onClick()})}else{a.maskLayer.css({position:"fixed",width:c,height:c});a.settings.onClick&&a.maskLayer.click(function(){d.settings.onClick()})}}MaskLayer.prototype.show=function(){var a=this,b=a;if(a.maskLayer.is(":hidden")){if($.browser.msie&&$.browser.version=="6.0"){$(window).bind("resize.maskLayer",function(){b.replacement()});a.replacement()}a.maskLayer.fadeIn("fast")}};MaskLayer.prototype.hide=function(){if(this.maskLayer.is(":visible")){this.maskLayer.fadeOut("fast");$(window).unbind("resize.maskLayer")}};var msgboxDefaultSetting={title:null,closeExist:true,skin:"default",isFixed:true,position:{x:"center",y:"center"},masklayer:{bgColor:"#000",opacity:.3},zIndex:999,shadow:false,existTime:null,content:"This is a MsgBox!",width:"auto",height:"auto",maskOnClick:null,onClose:null};function setPostion(){var c="center",a=this,b=a.settings.position,d=0,e=0;if($.browser.msie&&$.browser.version=="6.0"||a.settings.isFixed==false){d=b.x==c?$(document).scrollLeft()+($(window).width()-a.msgbox.width())/2:$(document).scrollLeft()+parseInt(b.x);e=b.y==c?$(document).scrollTop()+($(window).height()-a.msgbox.height())/2:$(document).scrollTop()+parseInt(b.y)}else{d=b.x==c?($(window).width()-a.msgbox.width())/2:parseInt(b.x);e=b.y==c?($(window).height()-a.msgbox.height())/2:parseInt(b.y)}a.msgbox.is(":animated")&&a.msgbox.stop(true);a.msgbox.animate({left:d+"px",top:e+"px"},300)}function MsgBox(d){var a=this,f=a;a.settings=$.extend(true,{},msgboxDefaultSetting,d);var e=!($.browser.msie&&$.browser.version=="6.0")&&a.settings.isFixed?"fixed":"absolute";a.msgbox=$("<div/>",{css:{position:e,"z-index":a.settings.zIndex+1,display:"none"}});$("body").append(a.masklayer).append(a.msgbox);a.settings.shadow&&a.msgbox.addClass("shadow");if(a.settings.masklayer)a.maskLayer=new MaskLayer({bgColor:a.settings.masklayer.bgColor,opacity:a.settings.masklayer.opacity,zIndex:a.settings.zIndex,onClick:a.settings.maskOnClick});var b=[];b.push('<table cellpadding="0" cellspacing="0" border="0"><tr><td class="background_horn top_left">&nbsp;</td><td class="top_center">&nbsp;</td><td class="background_horn top_right">');a.settings.closeExist&&b.push('<a href="javascript:void(0)" class="background_horn close_btn"></a>');b.push('</td></tr><tr><td class="content_left">&nbsp;</td><td class="content"><div style="width:'+(a.settings.width=="auto"?a.settings.width:a.settings.width+"px")+";height:"+(a.settings.height=="auto"?a.settings.height:a.settings.height+"px")+';">');a.settings.title&&b.push('<div class="msg_title">'+a.settings.title+"</div>");var c=a.settings.content;b.push($.type(c)=="object"?$("<div/>").append(c).html():c);b.push('</div></td><td class="content_right">&nbsp;</td></tr><tr><td class="background_horn bottom_left">&nbsp;</td><td class="bottom_center">&nbsp;</td><td class="background_horn bottom_right">&nbsp;</td></tr></table>');a.msgbox.append($(b.join("")));a.settings.closeExist&&$(".close_btn").click(function(){f.hide()})}MsgBox.prototype.show=function(){var a=this,b=a;if(a.msgbox.is(":hidden")){$(window).bind("resize.msgBox",function(){setPostion.call(b)});if($.browser.msie&&$.browser.version=="6.0"&&a.settings.isFixed){var d=a.settings.shadow?a.msgbox.width()-5:a.msgbox.width(),c=a.settings.shadow?a.msgbox.height()-5:a.msgbox.height();a.msgbox.css({width:d+"px",height:c+"px"});$(window).bind("scroll.msgBox",function(){setTimeout(function(){setPostion.call(b)},160)})}setPostion.call(a);a.settings.masklayer&&a.maskLayer.show();a.msgbox.fadeIn("fast");a.settings.existTime&&setTimeout(function(){b.hide()},a.settings.existTime)}};MsgBox.prototype.hide=function(){var a=this;if(a.msgbox.is(":visible")){a.settings.onClose&&a.settings.onClose();a.settings.masklayer&&a.maskLayer.hide();a.msgbox.fadeOut("fast");$(window).unbind("resize.msgBox");$.browser.msie&&$.browser.version=="6.0"&&a.settings.isFixed&&$(window).unbind("scroll.msgBox")}}